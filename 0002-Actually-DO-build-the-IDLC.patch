From daebdd5a59e4de4e79da65c9f0fe9855ddac7593 Mon Sep 17 00:00:00 2001
From: Scott K Logan <logans@cottsay.net>
Date: Wed, 13 Nov 2019 13:58:53 -0800
Subject: [PATCH 2/2] Actually, DO build the IDLC

---
 colcon.pkg        | 3 ---
 debian/control.em | 2 +-
 debian/rules.em   | 4 +---
 package.xml       | 2 ++
 4 files changed, 4 insertions(+), 7 deletions(-)
 delete mode 100644 colcon.pkg

diff --git a/colcon.pkg b/colcon.pkg
deleted file mode 100644
index 2d2a3ae..0000000
--- a/colcon.pkg
+++ /dev/null
@@ -1,3 +0,0 @@
-{
-  "cmake-args": [ "-DBUILD_IDLC=OFF" ]
-}
diff --git a/debian/control.em b/debian/control.em
index 6d7b65c..a1d3b9d 100644
--- a/debian/control.em
+++ b/debian/control.em
@@ -2,7 +2,7 @@ Source: @(Package)
 Section: misc
 Priority: optional
 Maintainer: @(Maintainer)
-Build-Depends: debhelper (>= @(debhelper_version).0.0), @(', '.join(BuildDepends))
+Build-Depends: debhelper (>= @(debhelper_version).0.0), @(', '.join(['default-jdk', 'maven'] + BuildDepends))
 Homepage: @(Homepage)
 Standards-Version: 3.9.2
 
diff --git a/debian/rules.em b/debian/rules.em
index d8f2309..aa010fa 100755
--- a/debian/rules.em
+++ b/debian/rules.em
@@ -26,9 +26,7 @@ override_dh_auto_configure:
 	# in the install tree that was dropped by catkin, and source it.  It will
 	# set things like CMAKE_PREFIX_PATH, PKG_CONFIG_PATH, and PYTHONPATH.
 	if [ -f "@(InstallationPrefix)/setup.sh" ]; then . "@(InstallationPrefix)/setup.sh"; fi && \
-	dh_auto_configure -- \
-					-DCMAKE_INSTALL_PREFIX="@(InstallationPrefix)" \
-					-DBUILD_IDLC=OFF
+	dh_auto_configure -- -DCMAKE_INSTALL_PREFIX="@(InstallationPrefix)"
 
 override_dh_auto_build:
 	# In case we're installing to a non-standard location, look for a setup.sh
diff --git a/package.xml b/package.xml
index 9d0980d..5b4b661 100644
--- a/package.xml
+++ b/package.xml
@@ -12,6 +12,8 @@
     <url type="repository">https://github.com/eclipse-cyclonedds/cyclonedds</url>
 
     <buildtool_depend>cmake</buildtool_depend>
+    <buildtool_depend>java</buildtool_depend>
+    <buildtool_depend>maven</buildtool_depend>
     <depend>openssl</depend>
     <test_depend>libcunit-dev</test_depend>
     <doc_depend>python3-sphinx</doc_depend>
-- 
2.23.0

